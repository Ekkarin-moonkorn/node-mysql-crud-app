<% include partials/header.ejs %>
    <div class="table-wrapper">
        <% if (players.length> 0) { %>
            <table class="table table-hovered">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Image</th>
                        <th scope="col">First Name</th>
                        <th scope="col">Last Name</th>
                        <th scope="col">Position</th>
                        <th scope="col">Address</th>
                        <th scope="col">Number</th>
                        <th scope="col">Username</th>
                        <th scope="col">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <% players.forEach((player, index)=> { %>
                        <tr>
                            <th scope="row">
                                <%= player.id %>
                            </th>
                            <td><img src="/assets/img/<%= player.image %>" class="rounded-circle player-img" alt="">
                            </td>
                            <td>
                                <%= player.first_name %>
                            </td>
                            <td>
                                <%= player.last_name %>
                            </td>
                            <td>
                                <%= player.position %>
                            </td>
                            <td>
                                <%= player.address%>
                            </td>
                            <td>
                                <%= player.number %>
                            </td>
                            <td>
                                <%= player.user_name %>
                            </td>
                            <td>
                                <a href="player/edit/<%= player.id %>" target="_blank" rel="noopener"
                                    class="btn btn-sm btn-success">Edit</a>
                                <!-- <a href="player/delete/<%= //player.id %>" class="btn btn-sm btn-danger">Delete</a> -->
                                <button onclick="summitdata('<%= player.id %>')" id="confirm"
                                    class="btn btn-sm btn-danger">Delete</button>
                            </td>
                        </tr>
                        <% }) %>
                </tbody>
            </table>
            <% } else { %>
                <p class="text-center">No players found. Go <a href="/player/add">Here</a> to add players.</p>
                <% } %>
    </div>
    <script>
        function summitdata(_id) {
            console.log(_id);
            let text = "ยืนยันการลบข้อมูล ID: " + _id;
            if (confirm(text) == true) {
                text = "ลบข้อมูลสำเร็จ!";
                window.location.href = "player/delete/" + _id;

            } else {
                text = "คุณกดยกเลิก";
            }
        }
    </script>
    </div>
    </body>

    </html>